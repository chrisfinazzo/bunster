#(TEST: simple parameter expansion)

${varname}
${#varname}

${varname:-}
${varname:-word}
${varname-word}
${varname-}

${varname:=}
${varname:=word}
${varname=word}
${varname=}

${varname:+}
${varname:+word}
${varname+word}
${varname+}

${varname:3}
${varname:3:8}

${varname^}
${varname^word}
${varname^^word}
${varname^^}


${varname,}
${varname,word}
${varname,,word}
${varname,,}

${varname#}
${varname#word}
${varname##word}
${varname##}

${varname%}
${varname%word}
${varname%%word}
${varname%%}

${varname/}
${varname/pattern}
${varname/pattern/word}
${varname//}
${varname//pattern}
${varname//pattern/word}
${varname/#}
${varname/#pattern}
${varname/#pattern/word}
${varname/%}
${varname/%pattern}
${varname/%pattern/word}
#(RESULT)

package main

import "github.com/yassinebenaid/bunster/runtime"

func Main(shell *runtime.Shell, streamManager *runtime.StreamManager) {
	defer shell.Terminate(streamManager)
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = shell.ReadVar("varname")
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.FormatInt(len([]rune(shell.ReadVar("varname"))))
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var expr3 = ""
		if len(shell.ReadVar("varname")) != 0 {
			expr3 = shell.ReadVar("varname")
		} else {
			expr3 = ""
		}
		var commandName = expr3
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var expr4 = ""
		if len(shell.ReadVar("varname")) != 0 {
			expr4 = shell.ReadVar("varname")
		} else {
			expr4 = "word"
		}
		var commandName = expr4
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var expr6 = ""
		if shell.VarIsSet("varname") {
			expr6 = shell.ReadVar("varname")
		} else {
			expr6 = "word"
		}
		var commandName = expr6
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var expr8 = ""
		if shell.VarIsSet("varname") {
			expr8 = shell.ReadVar("varname")
		} else {
			expr8 = ""
		}
		var commandName = expr8
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		if !(len(shell.ReadVar("varname")) != 0) {
			shell.SetVar("varname", "")
		}
		var commandName = shell.ReadVar("varname")
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		if !(len(shell.ReadVar("varname")) != 0) {
			shell.SetVar("varname", "word")
		}
		var commandName = shell.ReadVar("varname")
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		if !(shell.VarIsSet("varname")) {
			shell.SetVar("varname", "word")
		}
		var commandName = shell.ReadVar("varname")
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		if !(shell.VarIsSet("varname")) {
			shell.SetVar("varname", "")
		}
		var commandName = shell.ReadVar("varname")
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var expr15 = ""
		if len(shell.ReadVar("varname")) != 0 {
			expr15 = ""
		}
		var commandName = expr15
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var expr16 = ""
		if len(shell.ReadVar("varname")) != 0 {
			expr16 = "word"
		}
		var commandName = expr16
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var expr18 = ""
		if shell.VarIsSet("varname") {
			expr18 = "word"
		}
		var commandName = expr18
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var expr20 = ""
		if shell.VarIsSet("varname") {
			expr20 = ""
		}
		var commandName = expr20
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var offset21 = 0
		var length21 = int(^uint32(0))
		offset21 = 3
		var commandName = runtime.Substring(shell.ReadVar("varname"), offset21, length21)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var offset22 = 0
		var length22 = int(^uint32(0))
		offset22 = 3
		length22 = 8
		var commandName = runtime.Substring(shell.ReadVar("varname"), offset22, length22)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ChangeStringCase(true, shell.ReadVar("varname"), "?", false)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ChangeStringCase(true, shell.ReadVar("varname"), "word", false)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ChangeStringCase(true, shell.ReadVar("varname"), "word", true)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ChangeStringCase(true, shell.ReadVar("varname"), "?", true)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ChangeStringCase(false, shell.ReadVar("varname"), "?", false)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ChangeStringCase(false, shell.ReadVar("varname"), "word", false)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ChangeStringCase(false, shell.ReadVar("varname"), "word", true)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ChangeStringCase(false, shell.ReadVar("varname"), "?", true)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.RemoveMatchingPrefix(shell.ReadVar("varname"), "", false)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.RemoveMatchingPrefix(shell.ReadVar("varname"), "word", false)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.RemoveMatchingPrefix(shell.ReadVar("varname"), "word", true)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.RemoveMatchingPrefix(shell.ReadVar("varname"), "", true)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.RemoveMatchingSuffix(shell.ReadVar("varname"), "", false)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.RemoveMatchingSuffix(shell.ReadVar("varname"), "word", false)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.RemoveMatchingSuffix(shell.ReadVar("varname"), "word", true)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.RemoveMatchingSuffix(shell.ReadVar("varname"), "", true)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ReplaceMatching(shell.ReadVar("varname"), "", "", false)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ReplaceMatching(shell.ReadVar("varname"), "pattern", "", false)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ReplaceMatching(shell.ReadVar("varname"), "pattern", "word", false)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ReplaceMatching(shell.ReadVar("varname"), "", "", true)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ReplaceMatching(shell.ReadVar("varname"), "pattern", "", true)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ReplaceMatching(shell.ReadVar("varname"), "pattern", "word", true)
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ReplaceMatchingPrefix(shell.ReadVar("varname"), "", "")
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ReplaceMatchingPrefix(shell.ReadVar("varname"), "pattern", "")
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ReplaceMatchingPrefix(shell.ReadVar("varname"), "pattern", "word")
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ReplaceMatchingSuffix(shell.ReadVar("varname"), "", "")
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ReplaceMatchingSuffix(shell.ReadVar("varname"), "pattern", "")
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = runtime.ReplaceMatchingSuffix(shell.ReadVar("varname"), "pattern", "word")
		var arguments []string
		var env = make(map[string]string)
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
}


#(ENDTEST)



#(TEST: positional parameter expansion)


echo ${123} \
	${#123} \
	${123:-} \
	${123:-word} \
	${123-word} \
	${123-} \
\
	${123:+} \
	${123:+word} \
	${123+word} \
	${123+} \
\
	${123:3} \
	${123:3:8} \
\
	${123^} \
	${123^word} \
	${123^^word} \
	${123^^} \
\
	${123,} \
	${123,word} \
	${123,,word} \
	${123,,} \
\
	${123#} \
	${123#word} \
	${123##word} \
	${123##} \
\
	${123%} \
	${123%word} \
	${123%%word} \
	${123%%} \
\
	${123/} \
	${123/pattern} \
	${123/pattern/word} \
	${123//} \
	${123//pattern} \
	${123//pattern/word} \
	${123/#} \
	${123/#pattern} \
	${123/#pattern/word} \
	${123/%} \
	${123/%pattern} \
	${123/%pattern/word}
	
#(RESULT)
package main

import "github.com/yassinebenaid/bunster/runtime"

func Main(shell *runtime.Shell, streamManager *runtime.StreamManager) {
	defer shell.Terminate(streamManager)
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = "echo"
		var arguments []string
		var env = make(map[string]string)
		arguments = append(arguments, shell.ReadSpecialVar("123"))
		arguments = append(arguments, runtime.FormatInt(len([]rune(shell.ReadSpecialVar("123")))))
		var expr4 = ""
		if len(shell.ReadSpecialVar("123")) != 0 {
			expr4 = shell.ReadSpecialVar("123")
		} else {
			expr4 = ""
		}
		arguments = append(arguments, expr4)
		var expr5 = ""
		if len(shell.ReadSpecialVar("123")) != 0 {
			expr5 = shell.ReadSpecialVar("123")
		} else {
			expr5 = "word"
		}
		arguments = append(arguments, expr5)
		var expr7 = ""
		if 123 <= len(shell.Args) {
			expr7 = shell.ReadSpecialVar("123")
		} else {
			expr7 = "word"
		}
		arguments = append(arguments, expr7)
		var expr9 = ""
		if 123 <= len(shell.Args) {
			expr9 = shell.ReadSpecialVar("123")
		} else {
			expr9 = ""
		}
		arguments = append(arguments, expr9)
		var expr10 = ""
		if len(shell.ReadSpecialVar("123")) != 0 {
			expr10 = ""
		}
		arguments = append(arguments, expr10)
		var expr11 = ""
		if len(shell.ReadSpecialVar("123")) != 0 {
			expr11 = "word"
		}
		arguments = append(arguments, expr11)
		var expr13 = ""
		if 123 <= len(shell.Args) {
			expr13 = "word"
		}
		arguments = append(arguments, expr13)
		var expr15 = ""
		if 123 <= len(shell.Args) {
			expr15 = ""
		}
		arguments = append(arguments, expr15)
		var offset16 = 0
		var length16 = int(^uint32(0))
		offset16 = 3
		arguments = append(arguments, runtime.Substring(shell.ReadSpecialVar("123"), offset16, length16))
		var offset17 = 0
		var length17 = int(^uint32(0))
		offset17 = 3
		length17 = 8
		arguments = append(arguments, runtime.Substring(shell.ReadSpecialVar("123"), offset17, length17))
		arguments = append(arguments, runtime.ChangeStringCase(true, shell.ReadSpecialVar("123"), "?", false))
		arguments = append(arguments, runtime.ChangeStringCase(true, shell.ReadSpecialVar("123"), "word", false))
		arguments = append(arguments, runtime.ChangeStringCase(true, shell.ReadSpecialVar("123"), "word", true))
		arguments = append(arguments, runtime.ChangeStringCase(true, shell.ReadSpecialVar("123"), "?", true))
		arguments = append(arguments, runtime.ChangeStringCase(false, shell.ReadSpecialVar("123"), "?", false))
		arguments = append(arguments, runtime.ChangeStringCase(false, shell.ReadSpecialVar("123"), "word", false))
		arguments = append(arguments, runtime.ChangeStringCase(false, shell.ReadSpecialVar("123"), "word", true))
		arguments = append(arguments, runtime.ChangeStringCase(false, shell.ReadSpecialVar("123"), "?", true))
		arguments = append(arguments, runtime.RemoveMatchingPrefix(shell.ReadSpecialVar("123"), "", false))
		arguments = append(arguments, runtime.RemoveMatchingPrefix(shell.ReadSpecialVar("123"), "word", false))
		arguments = append(arguments, runtime.RemoveMatchingPrefix(shell.ReadSpecialVar("123"), "word", true))
		arguments = append(arguments, runtime.RemoveMatchingPrefix(shell.ReadSpecialVar("123"), "", true))
		arguments = append(arguments, runtime.RemoveMatchingSuffix(shell.ReadSpecialVar("123"), "", false))
		arguments = append(arguments, runtime.RemoveMatchingSuffix(shell.ReadSpecialVar("123"), "word", false))
		arguments = append(arguments, runtime.RemoveMatchingSuffix(shell.ReadSpecialVar("123"), "word", true))
		arguments = append(arguments, runtime.RemoveMatchingSuffix(shell.ReadSpecialVar("123"), "", true))
		arguments = append(arguments, runtime.ReplaceMatching(shell.ReadSpecialVar("123"), "", "", false))
		arguments = append(arguments, runtime.ReplaceMatching(shell.ReadSpecialVar("123"), "pattern", "", false))
		arguments = append(arguments, runtime.ReplaceMatching(shell.ReadSpecialVar("123"), "pattern", "word", false))
		arguments = append(arguments, runtime.ReplaceMatching(shell.ReadSpecialVar("123"), "", "", true))
		arguments = append(arguments, runtime.ReplaceMatching(shell.ReadSpecialVar("123"), "pattern", "", true))
		arguments = append(arguments, runtime.ReplaceMatching(shell.ReadSpecialVar("123"), "pattern", "word", true))
		arguments = append(arguments, runtime.ReplaceMatchingPrefix(shell.ReadSpecialVar("123"), "", ""))
		arguments = append(arguments, runtime.ReplaceMatchingPrefix(shell.ReadSpecialVar("123"), "pattern", ""))
		arguments = append(arguments, runtime.ReplaceMatchingPrefix(shell.ReadSpecialVar("123"), "pattern", "word"))
		arguments = append(arguments, runtime.ReplaceMatchingSuffix(shell.ReadSpecialVar("123"), "", ""))
		arguments = append(arguments, runtime.ReplaceMatchingSuffix(shell.ReadSpecialVar("123"), "pattern", ""))
		arguments = append(arguments, runtime.ReplaceMatchingSuffix(shell.ReadSpecialVar("123"), "pattern", "word"))
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
}

#(ENDTEST)


#(TEST: parameter expansion on arrays)

echo ${varname[123]} \
	${#varname[123]} \
\
	${varname[123]:-} \
	${varname[123]:-word} \
	${varname[123]-word} \
	${varname[123]-} \
\
	${varname[123]:=} \
	${varname[123]:=word} \
	${varname[123]=word} \
	${varname[123]=} \
\
	${varname[123]:+} \
	${varname[123]:+word} \
	${varname[123]+word} \
	${varname[123]+} \
\
	${varname[123]:3} \
	${varname[123]:3:8} \
\
	${varname[123]^} \
	${varname[123]^word} \
	${varname[123]^^word} \
	${varname[123]^^} \
\
	${varname[123],} \
	${varname[123],word} \
	${varname[123],,word} \
	${varname[123],,} \
\
	${varname[123]#} \
	${varname[123]#word} \
	${varname[123]##word} \
	${varname[123]##} \
\
	${varname[123]%} \
	${varname[123]%word} \
	${varname[123]%%word} \
	${varname[123]%%} \
\
	${varname[123]/} \
	${varname[123]/pattern} \
	${varname[123]/pattern/word} \
	${varname[123]//} \
	${varname[123]//pattern} \
	${varname[123]//pattern/word} \
	${varname[123]/#} \
	${varname[123]/#pattern} \
	${varname[123]/#pattern/word} \
	${varname[123]/%} \
	${varname[123]/%pattern} \
	${varname[123]/%pattern/word} \

#(RESULT)

package main

import "github.com/yassinebenaid/bunster/runtime"

func Main(shell *runtime.Shell, streamManager *runtime.StreamManager) {
	defer shell.Terminate(streamManager)
	func() {
		streamManager := streamManager.Clone()
		defer streamManager.Destroy()
		var commandName = "echo"
		var arguments []string
		var env = make(map[string]string)
		expr3, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, shell.ReadArrayVar("varname", runtime.ParseInt(expr3)))
		expr5, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.FormatInt(len([]rune(shell.ReadArrayVar("varname", runtime.ParseInt(expr5))))))
		var expr6 = ""
		expr7, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		expr8, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		if len(shell.ReadArrayVar("varname", runtime.ParseInt(expr8))) != 0 {
			expr6 = shell.ReadArrayVar("varname", runtime.ParseInt(expr7))
		} else {
			expr6 = ""
		}
		arguments = append(arguments, expr6)
		var expr9 = ""
		expr11, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		expr12, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		if len(shell.ReadArrayVar("varname", runtime.ParseInt(expr12))) != 0 {
			expr9 = shell.ReadArrayVar("varname", runtime.ParseInt(expr11))
		} else {
			expr9 = "word"
		}
		arguments = append(arguments, expr9)
		var expr13 = ""
		expr15, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		expr16, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		if shell.VarIndexIsSet("varname", runtime.ParseInt(expr16)) {
			expr13 = shell.ReadArrayVar("varname", runtime.ParseInt(expr15))
		} else {
			expr13 = "word"
		}
		arguments = append(arguments, expr13)
		var expr17 = ""
		expr18, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		expr19, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		if shell.VarIndexIsSet("varname", runtime.ParseInt(expr19)) {
			expr17 = shell.ReadArrayVar("varname", runtime.ParseInt(expr18))
		} else {
			expr17 = ""
		}
		arguments = append(arguments, expr17)
		expr21, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		expr22, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		if !(len(shell.ReadArrayVar("varname", runtime.ParseInt(expr22))) != 0) {
			shell.SetArrayVar("varname", runtime.ParseInt(expr21), "")
		}
		expr23, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, shell.ReadArrayVar("varname", runtime.ParseInt(expr23)))
		expr26, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		expr27, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		if !(len(shell.ReadArrayVar("varname", runtime.ParseInt(expr27))) != 0) {
			shell.SetArrayVar("varname", runtime.ParseInt(expr26), "word")
		}
		expr28, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, shell.ReadArrayVar("varname", runtime.ParseInt(expr28)))
		expr31, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		expr32, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		if !(shell.VarIndexIsSet("varname", runtime.ParseInt(expr32))) {
			shell.SetArrayVar("varname", runtime.ParseInt(expr31), "word")
		}
		expr33, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, shell.ReadArrayVar("varname", runtime.ParseInt(expr33)))
		expr35, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		expr36, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		if !(shell.VarIndexIsSet("varname", runtime.ParseInt(expr36))) {
			shell.SetArrayVar("varname", runtime.ParseInt(expr35), "")
		}
		expr37, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, shell.ReadArrayVar("varname", runtime.ParseInt(expr37)))
		var expr38 = ""
		expr39, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		if len(shell.ReadArrayVar("varname", runtime.ParseInt(expr39))) != 0 {
			expr38 = ""
		}
		arguments = append(arguments, expr38)
		var expr40 = ""
		expr42, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		if len(shell.ReadArrayVar("varname", runtime.ParseInt(expr42))) != 0 {
			expr40 = "word"
		}
		arguments = append(arguments, expr40)
		var expr43 = ""
		expr45, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		if shell.VarIndexIsSet("varname", runtime.ParseInt(expr45)) {
			expr43 = "word"
		}
		arguments = append(arguments, expr43)
		var expr46 = ""
		expr47, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		if shell.VarIndexIsSet("varname", runtime.ParseInt(expr47)) {
			expr46 = ""
		}
		arguments = append(arguments, expr46)
		var offset48 = 0
		var length48 = int(^uint32(0))
		offset48 = 3
		expr49, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.Substring(shell.ReadArrayVar("varname", runtime.ParseInt(expr49)), offset48, length48))
		var offset50 = 0
		var length50 = int(^uint32(0))
		offset50 = 3
		length50 = 8
		expr51, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.Substring(shell.ReadArrayVar("varname", runtime.ParseInt(expr51)), offset50, length50))
		expr53, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ChangeStringCase(true, shell.ReadArrayVar("varname", runtime.ParseInt(expr53)), "?", false))
		expr56, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ChangeStringCase(true, shell.ReadArrayVar("varname", runtime.ParseInt(expr56)), "word", false))
		expr59, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ChangeStringCase(true, shell.ReadArrayVar("varname", runtime.ParseInt(expr59)), "word", true))
		expr61, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ChangeStringCase(true, shell.ReadArrayVar("varname", runtime.ParseInt(expr61)), "?", true))
		expr63, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ChangeStringCase(false, shell.ReadArrayVar("varname", runtime.ParseInt(expr63)), "?", false))
		expr66, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ChangeStringCase(false, shell.ReadArrayVar("varname", runtime.ParseInt(expr66)), "word", false))
		expr69, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ChangeStringCase(false, shell.ReadArrayVar("varname", runtime.ParseInt(expr69)), "word", true))
		expr71, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ChangeStringCase(false, shell.ReadArrayVar("varname", runtime.ParseInt(expr71)), "?", true))
		expr73, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.RemoveMatchingPrefix(shell.ReadArrayVar("varname", runtime.ParseInt(expr73)), "", false))
		expr76, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.RemoveMatchingPrefix(shell.ReadArrayVar("varname", runtime.ParseInt(expr76)), "word", false))
		expr79, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.RemoveMatchingPrefix(shell.ReadArrayVar("varname", runtime.ParseInt(expr79)), "word", true))
		expr81, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.RemoveMatchingPrefix(shell.ReadArrayVar("varname", runtime.ParseInt(expr81)), "", true))
		expr83, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.RemoveMatchingSuffix(shell.ReadArrayVar("varname", runtime.ParseInt(expr83)), "", false))
		expr86, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.RemoveMatchingSuffix(shell.ReadArrayVar("varname", runtime.ParseInt(expr86)), "word", false))
		expr89, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.RemoveMatchingSuffix(shell.ReadArrayVar("varname", runtime.ParseInt(expr89)), "word", true))
		expr91, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.RemoveMatchingSuffix(shell.ReadArrayVar("varname", runtime.ParseInt(expr91)), "", true))
		expr93, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ReplaceMatching(shell.ReadArrayVar("varname", runtime.ParseInt(expr93)), "", "", false))
		expr96, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ReplaceMatching(shell.ReadArrayVar("varname", runtime.ParseInt(expr96)), "pattern", "", false))
		expr100, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ReplaceMatching(shell.ReadArrayVar("varname", runtime.ParseInt(expr100)), "pattern", "word", false))
		expr102, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ReplaceMatching(shell.ReadArrayVar("varname", runtime.ParseInt(expr102)), "", "", true))
		expr105, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ReplaceMatching(shell.ReadArrayVar("varname", runtime.ParseInt(expr105)), "pattern", "", true))
		expr109, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ReplaceMatching(shell.ReadArrayVar("varname", runtime.ParseInt(expr109)), "pattern", "word", true))
		expr111, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ReplaceMatchingPrefix(shell.ReadArrayVar("varname", runtime.ParseInt(expr111)), "", ""))
		expr114, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ReplaceMatchingPrefix(shell.ReadArrayVar("varname", runtime.ParseInt(expr114)), "pattern", ""))
		expr118, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ReplaceMatchingPrefix(shell.ReadArrayVar("varname", runtime.ParseInt(expr118)), "pattern", "word"))
		expr120, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ReplaceMatchingSuffix(shell.ReadArrayVar("varname", runtime.ParseInt(expr120)), "", ""))
		expr123, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ReplaceMatchingSuffix(shell.ReadArrayVar("varname", runtime.ParseInt(expr123)), "pattern", ""))
		expr127, exitCode := func() (string, int) {
			var arithmeticResult = 0
			arithmeticResult = 123
			return runtime.FormatInt(arithmeticResult), shell.ExitCode
		}()
		if exitCode != 0 {
			shell.ExitCode = exitCode
			return
		}
		arguments = append(arguments, runtime.ReplaceMatchingSuffix(shell.ReadArrayVar("varname", runtime.ParseInt(expr127)), "pattern", "word"))
		if err := shell.Exec(streamManager, commandName, arguments, env); err != nil {
			shell.HandleError(streamManager, err)
			return
		}

	}()
}

#(ENDTEST)