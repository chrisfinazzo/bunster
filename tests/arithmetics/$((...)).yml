cases:
  - name: simple expressions
    script: |
      echo $(( 1 ))

      var=10
      echo $(( $var ))
      echo $(( $unknown_var ))

      var=5.6
      echo $(( $var ))

      echo $(( 1, 2, 3 ))
    expect:
      stdout: |
        1
        10
        0
        5
        3

  - name: unary arithmetics
    script: |
      echo $(( -1 ))
      echo $(( - - 1 ))
      echo $(( +1 ))
      echo $(( + +1 ))
      echo $(( + -1 ))
      echo $(( - +1 ))
    expect:
      stdout: |
        -1
        1
        1
        1
        -1
        -1

  - name: increment and decrement operations
    script: |
      var=10
      echo pre:$(( --var ))  pre:$var

      var=10
      echo pre:$(( ++var ))  pre:$var

      var=10
      echo post:$(( var-- ))  post:$var

      var=10
      echo post:$(( var++ ))  post:$var

      var=10
      echo multi:$(( var++, var )) multi:$(( var--, var ))
    expect:
      stdout: |
        pre:9 pre:9
        pre:11 pre:11
        post:10 post:9
        post:10 post:11
        multi:11 multi:10

  - name: flip and negation operations
    script: |
      var=10
      echo negate:$(( !10 )) negate:$(( !var )) negate:$(( !var2 )) negate:$(( !0 )) negate:$(( !-1 ))

      echo flip:$(( ~0 )) flip:$(( ~1 )) flip:$(( ~-1 )) flip:$(( ~5 ))
    expect:
      stdout: |
        negate:0 negate:0 negate:1 negate:1 negate:0
        flip:-1 flip:-2 flip:0 flip:-6

  - name: binary operations
    script: |
      echo $(( 1 + 1 ))
    expect:
      stdout: |
        2
