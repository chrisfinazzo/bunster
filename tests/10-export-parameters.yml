---
cases:
  - name: "can export variables"
    script: |
      export var=foobar
      echo var:$var
      bash -c 'echo env:$var'
    expect:
      stdout: |
        var:foobar
        env:foobar

  - name: "can mark variables as exported"
    script: |
      export var

      var=foobar
      var2=bazboo

      echo var:$var var2:$var2
      bash -c 'echo env:$var env2:$var2'
    expect:
      stdout: |
        var:foobar var2:bazboo
        env:foobar env2:

  - name: "exported variables are inherited to subshells"
    script: |
      export var

      var=foobar

      (
        var=beaoz
        echo var:$var
        bash -c 'echo env:$var'
      )

      echo var:$var
      bash -c 'echo env:$var'
    expect:
      stdout: |
        var:beaoz
        env:beaoz
        var:foobar
        env:foobar
