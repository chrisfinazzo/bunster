---
cases:
  - name: "simple `while` command"
    script: |
      while true; do
        echo foo
        break
      done
    expect:
      stdout: |
        foo

  - name: "simple `until` command"
    script: |
      until false; do
        echo foo
        break
      done
    expect:
      stdout: |
        foo

  - name: "simple `for` loop"
    args: ["foo", "bar", "baz"]
    script: |
      # over positional
      for arg; do
        echo positional: $arg
      done

      for arg in boo boz fee; do
        echo inline: $arg
      done
    expect:
      stdout: |
        positional: foo
        positional: bar
        positional: baz
        inline: boo
        inline: boz
        inline: fee

  - name: "`for` loop within pipeline"
    args: ["foo", "bar", "baz"]
    script: |
      for arg; do
        echo positional: $arg
      done   |  cat

      for arg in boo boz fee; do
          echo inline: $arg
          cat
      done |  cat
    expect:
      stdout: |
        positional: foo
        positional: bar
        positional: baz
        inline: boo
        inline: boz
        inline: fee

  - name: "`for` loop within list"
    args: ["foo", "bar", "baz"]
    script: |
      for arg; do
        echo positional: $arg
      done   &&

        for arg in boo boz fee; do
          echo inline: $arg
        done
    expect:
      stdout: |
        positional: foo
        positional: bar
        positional: baz
        inline: boo
        inline: boz
        inline: fee

# TODO: add more tests here
